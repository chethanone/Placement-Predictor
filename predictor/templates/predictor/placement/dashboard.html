{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Placement Dashboard</title>
 
 <!-- Google Fonts -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
 
 <!-- Font Awesome -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 
 <style>
 :root {
 --deep-blue: #1e3a8a;
 --teal: #06b6d4;
 --coral: #fb7185;
 --gold: #fbbf24;
 --slate: #334155;
 --light-gray: #f8fafc;
 --white: #ffffff;
 --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
 --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
 --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
 }

 * {
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 }

 body {
 font-family: 'Inter', 'Poppins', sans-serif;
 background: linear-gradient(135deg, var(--light-gray) 0%, #e0f2fe 50%, var(--light-gray) 100%);
 color: var(--slate);
 min-height: 100vh;
 padding: 30px;
 }

 .container {
 max-width: 1400px;
 margin: 0 auto;
 }

 /* Header */
 .header {
 background: linear-gradient(135deg, var(--deep-blue), var(--teal));
 padding: 35px 40px;
 border-radius: 20px;
 margin-bottom: 30px;
 box-shadow: var(--shadow-lg);
 animation: slideDown 0.6s ease;
 color: white;
 }

 @keyframes slideDown {
 from {
 opacity: 0;
 transform: translateY(-20px);
 }
 to {
 opacity: 1;
 transform: translateY(0);
 }
 }

 .header-content {
 display: flex;
 justify-content: space-between;
 align-items: center;
 }

 .header-title {
 display: flex;
 align-items: center;
 gap: 15px;
 }

 .header-title i {
 font-size: 42px;
 color: var(--gold);
 }

 .header-title h1 {
 font-size: 32px;
 font-weight: 700;
 margin-bottom: 5px;
 }

 .header-title p {
 color: rgba(255, 255, 255, 0.9);
 font-size: 15px;
 }

 /* Navigation */
 .nav {
 background: white;
 padding: 18px 30px;
 border-radius: 15px;
 margin-bottom: 30px;
 box-shadow: var(--shadow-sm);
 display: flex;
 gap: 25px;
 align-items: center;
 animation: fadeIn 0.8s ease;
 }

 @keyframes fadeIn {
 from { opacity: 0; }
 to { opacity: 1; }
 }

 .nav a {
 text-decoration: none;
 color: var(--slate);
 font-weight: 600;
 font-size: 15px;
 padding: 10px 20px;
 border-radius: 10px;
 transition: all 0.3s ease;
 display: flex;
 align-items: center;
 gap: 8px;
 }

 .nav a:hover {
 background: linear-gradient(135deg, var(--deep-blue), var(--teal));
 color: white;
 transform: translateY(-2px);
 }

 .nav a i {
 font-size: 16px;
 }

 /* Stats Grid */
 .stats {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
 gap: 25px;
 margin-bottom: 35px;
 }

 .stat-card {
 background: white;
 padding: 30px;
 border-radius: 18px;
 text-align: center;
 box-shadow: var(--shadow-sm);
 transition: all 0.3s ease;
 animation: scaleIn 0.5s ease;
 position: relative;
 overflow: hidden;
 }

 @keyframes scaleIn {
 from {
 opacity: 0;
 transform: scale(0.9);
 }
 to {
 opacity: 1;
 transform: scale(1);
 }
 }

 .stat-card::before {
 content: '';
 position: absolute;
 top: 0;
 left: 0;
 right: 0;
 height: 5px;
 background: linear-gradient(90deg, var(--deep-blue), var(--teal));
 }

 .stat-card:nth-child(2)::before {
 background: linear-gradient(90deg, var(--teal), var(--coral));
 }

 .stat-card:nth-child(3)::before {
 background: linear-gradient(90deg, var(--coral), var(--gold));
 }

 .stat-card:nth-child(4)::before {
 background: linear-gradient(90deg, var(--gold), var(--deep-blue));
 }

 .stat-card:hover {
 transform: translateY(-5px);
 box-shadow: var(--shadow-md);
 }

 .stat-icon {
 font-size: 42px;
 margin-bottom: 15px;
 background: linear-gradient(135deg, var(--deep-blue), var(--teal));
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 }

 .stat-card:nth-child(2) .stat-icon {
 background: linear-gradient(135deg, var(--teal), var(--coral));
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 }

 .stat-card:nth-child(3) .stat-icon {
 background: linear-gradient(135deg, var(--coral), var(--gold));
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 }

 .stat-card:nth-child(4) .stat-icon {
 background: linear-gradient(135deg, var(--gold), var(--deep-blue));
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
 }

 .stat-number {
 font-size: 48px;
 font-weight: 700;
 color: var(--deep-blue);
 margin-bottom: 8px;
 line-height: 1;
 }

 .stat-label {
 color: var(--slate);
 font-size: 15px;
 font-weight: 500;
 }

 /* Table */
 .table-container {
 background: white;
 border-radius: 18px;
 padding: 35px;
 box-shadow: var(--shadow-sm);
 animation: fadeIn 1s ease;
 }

 .table-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 25px;
 padding-bottom: 20px;
 border-bottom: 2px solid #e2e8f0;
 }

 .table-title {
 font-size: 22px;
 font-weight: 700;
 color: var(--deep-blue);
 display: flex;
 align-items: center;
 gap: 12px;
 }

 .table-title i {
 color: var(--teal);
 font-size: 24px;
 }

 table {
 width: 100%;
 border-collapse: collapse;
 }

 thead th {
 text-align: left;
 padding: 15px;
 color: var(--deep-blue);
 font-weight: 600;
 font-size: 13px;
 text-transform: uppercase;
 letter-spacing: 0.5px;
 border-bottom: 2px solid #e2e8f0;
 }

 tbody tr {
 border-bottom: 1px solid #f1f5f9;
 transition: all 0.2s ease;
 }

 tbody tr:hover {
 background: rgba(6, 182, 212, 0.05);
 transform: scale(1.01);
 }

 tbody td {
 padding: 18px 15px;
 color: var(--slate);
 font-size: 14px;
 }

 tbody td:first-child {
 font-weight: 600;
 color: var(--deep-blue);
 }

 .probability-badge {
 display: inline-block;
 padding: 6px 14px;
 border-radius: 20px;
 font-weight: 600;
 font-size: 13px;
 }

 .prob-high {
 background: rgba(34, 197, 94, 0.1);
 color: #15803d;
 }

 .prob-medium {
 background: rgba(251, 191, 36, 0.1);
 color: #ca8a04;
 }

 .prob-low {
 background: rgba(251, 113, 133, 0.1);
 color: #be123c;
 }

 .no-data {
 text-align: center;
 padding: 60px 20px;
 color: #94a3b8;
 }

 .no-data i {
 font-size: 64px;
 color: var(--teal);
 margin-bottom: 20px;
 display: block;
 }

 @media (max-width: 768px) {
 body {
 padding: 15px;
 }

 .header {
 padding: 25px 20px;
 }

 .header-content {
 flex-direction: column;
 gap: 15px;
 }

 .header-title h1 {
 font-size: 24px;
 }

 .stats {
 grid-template-columns: 1fr;
 }

 .nav {
 flex-wrap: wrap;
 }

 .table-container {
 padding: 20px;
 overflow-x: auto;
 }

 table {
 min-width: 600px;
 }
 }
 </style>
</head>
<body>
 <div class="container">
 <!-- Header -->
 <div class="header">
 <div class="header-content">
 <div class="header-title">
 <i class="fas fa-briefcase"></i>
 <div>
 <h1>Placement Dashboard</h1>
 <p>Analytics & Training Recommendations</p>
 </div>
 </div>
 </div>
 </div>

 <!-- Navigation -->
 <div class="nav">
 <a href="{% url 'placement_analytics' %}">
 <i class="fas fa-chart-pie"></i>
 <span>Analytics</span>
 </a>
 <a href="{% url 'placement_logout' %}">
 <i class="fas fa-sign-out-alt"></i>
 <span>Logout</span>
 </a>
 </div>

 <!-- Stats Grid -->
 <div class="stats">
 <div class="stat-card">
 <i class="fas fa-users stat-icon"></i>
 <div class="stat-number">{{ total_students }}</div>
 <p class="stat-label">Total Students</p>
 </div>
 <div class="stat-card">
 <i class="fas fa-percentage stat-icon"></i>
 <div class="stat-number">{{ placement_rate }}%</div>
 <p class="stat-label">Placement Rate</p>
 </div>
 <div class="stat-card">
 <i class="fas fa-graduation-cap stat-icon"></i>
 <div class="stat-number">{{ avg_cgpa }}</div>
 <p class="stat-label">Avg CGPA</p>
 </div>
 <div class="stat-card">
 <i class="fas fa-chart-line stat-icon"></i>
 <div class="stat-number">{{ avg_placement_prob }}%</div>
 <p class="stat-label">Avg Placement Prob</p>
 </div>
 </div>

 <!-- Recent Predictions Table -->
 <div class="table-container">
 <div class="table-header">
 <h2 class="table-title">
 <i class="fas fa-history"></i>
 Recent Predictions
 </h2>
 </div>

 {% if recent_predictions %}
 <table>
 <thead>
 <tr>
 <th>Student</th>
 <th>Branch</th>
 <th>Probability</th>
 <th>Date</th>
 </tr>
 </thead>
 <tbody>
 {% for pred in recent_predictions %}
 <tr>
 <td><strong>{{ pred.student.name }}</strong></td>
 <td>{{ pred.student.get_branch_display }}</td>
 <td>
 {% if pred.placement_probability >= 70 %}
 <span class="probability-badge prob-high">{{ pred.placement_probability }}%</span>
 {% elif pred.placement_probability >= 50 %}
 <span class="probability-badge prob-medium">{{ pred.placement_probability }}%</span>
 {% else %}
 <span class="probability-badge prob-low">{{ pred.placement_probability }}%</span>
 {% endif %}
 </td>
 <td>{{ pred.predicted_at|date:"M d, Y" }}</td>
 </tr>
 {% endfor %}
 </tbody>
 </table>
 {% else %}
 <div class="no-data">
 <i class="fas fa-chart-bar"></i>
 <p style="font-size: 18px; margin-bottom: 10px;">No predictions yet</p>
 <small>Predictions will appear here once students start using the system</small>
 </div>
 {% endif %}
 </div>
 </div>
</body>
</html>